# Introduction

**react-performance-tracking** automates React render performance checks in Playwright. Capture React Profiler metrics, apply CPU throttling, run warmups, enforce budgets, and catch performance regressions before they hit production.

## Why Use This?

- **Catch performance regressions early** â€“ Detect slow renders before they reach production
- **Real-world conditions** â€“ Test with CPU throttling, network throttling, and device simulation
- **CI/CD integration** â€“ Fail builds automatically when performance budgets are exceeded
- **Comprehensive metrics** â€“ Track React renders, FPS, memory usage, and Core Web Vitals
- **Zero boilerplate** â€“ Drop-in Playwright integration with minimal configuration

## Features

| Feature | Description | Browser Support |
|---------|-------------|-----------------|
| ğŸ“Š React Profiler | Collect real render metrics via React's Profiler API | All |
| ğŸ­ Playwright Integration | `test.performance()` helper and `performance` fixture | All |
| ğŸ§© Component Profiling | Track per-component metrics with multiple profilers | All |
| ğŸï¸ FPS Tracking | Measure average FPS via Chrome DevTools Protocol | Chromium |
| ğŸ§  Memory Tracking | Track heap growth to detect memory leaks | Chromium |
| ğŸ“ˆ Web Vitals | Capture LCP, INP, CLS via PerformanceObserver | All |
| ğŸ¢ CPU Throttling | Simulate slower devices | Chromium |
| ğŸŒ Network Throttling | Simulate slow networks (3G/4G presets) | Chromium |
| â±ï¸ Custom Metrics | Track custom performance marks and measures | All |
| ğŸ”¥ Warmup Runs | Reduce cold-start noise (default on CI) | All |
| ğŸ”„ Multiple Iterations | Run tests multiple times with percentile metrics | All |
| ğŸ“Š Trace Export | Export Chrome DevTools traces for flamegraph | Chromium |

## How It Works

The library has a **two-layer architecture**:

### React Layer (Browser)
Wrap your app with `PerformanceProvider` and use `<Profiler>` components to collect render metrics. The provider exposes a `window.__REACT_PERFORMANCE__` store that aggregates metrics globally and per-component.

### Playwright Layer (Node.js)
Use `createPerformanceTest()` to extend Playwright with `test.performance()`. The test runner orchestrates: setup â†’ warmup â†’ test â†’ assertions â†’ cleanup. It communicates with the browser via `page.evaluate()` to retrieve metrics.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Playwright Test (Node.js)                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  test.performance({ thresholds: {...} })     â”‚   â”‚
â”‚  â”‚  â”œâ”€ Setup (throttling, features)             â”‚   â”‚
â”‚  â”‚  â”œâ”€ Warmup iteration (if enabled)            â”‚   â”‚
â”‚  â”‚  â”œâ”€ Test iterations                          â”‚   â”‚
â”‚  â”‚  â”œâ”€ Assertions (thresholds + buffers)        â”‚   â”‚
â”‚  â”‚  â””â”€ Cleanup (CDP sessions)                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                      â”‚                              â”‚
â”‚                      â”‚ page.evaluate()              â”‚
â”‚                      â–¼                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Browser (window.__REACT_PERFORMANCE__)      â”‚   â”‚
â”‚  â”‚  â”œâ”€ samples: PerformanceSample[]             â”‚   â”‚
â”‚  â”‚  â”œâ”€ components: { [id]: ComponentMetrics }   â”‚   â”‚
â”‚  â”‚  â””â”€ reset: () => void                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Requirements

- **React** 18+ or 19+
- **Playwright** 1.40+
- **Node.js** 18+

:::tip
Some features like FPS tracking, memory tracking, CPU throttling, and network throttling require **Chromium**. Other browsers will gracefully skip these features without errors.
:::

## Next Steps

Ready to get started? Follow these guides:

1. [Installation](/docs/installation) â€“ Install the package
2. [Quick Start](/docs/quick-start) â€“ Write your first performance test
3. [React Setup](/docs/guides/react-setup) â€“ Configure your React app
4. [Playwright Setup](/docs/guides/playwright-setup) â€“ Set up Playwright integration
